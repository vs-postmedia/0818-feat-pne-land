var we=Object.defineProperty;var _e=(e,t,n)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>(_e(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function U(){}function ge(e){return e()}function pe(){return Object.create(null)}function re(e){e.forEach(ge)}function me(e){return typeof e=="function"}function Ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let se;function he(e,t){return e===t?!0:(se||(se=document.createElement("a")),se.href=t,e===se.href)}function xe(e){return Object.keys(e).length===0}function m(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function ke(e){return document.createTextNode(e)}function L(){return ke(" ")}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Te(e){return Array.from(e.childNodes)}let te;function ee(e){te=e}function Se(){if(!te)throw new Error("Function called outside component initialization");return te}function Oe(e){Se().$$.on_mount.push(e)}const G=[],M=[];let K=[];const ve=[],Pe=Promise.resolve();let ue=!1;function Le(){ue||(ue=!0,Pe.then(be))}function de(e){K.push(e)}const ae=new Set;let Y=0;function be(){if(Y!==0)return;const e=te;do{try{for(;Y<G.length;){const t=G[Y];Y++,ee(t),Me(t.$$)}}catch(t){throw G.length=0,Y=0,t}for(ee(null),G.length=0,Y=0;M.length;)M.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];ae.has(n)||(ae.add(n),n())}K.length=0}while(G.length);for(;ve.length;)ve.pop()();ue=!1,ae.clear(),ee(e)}function Me(e){if(e.fragment!==null){e.update(),re(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}function He(e){const t=[],n=[];K.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),K=t}const Ae=new Set;function Ne(e,t){e&&e.i&&(Ae.delete(e),e.i(t))}function $e(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),de(()=>{const r=e.$$.on_mount.map(ge).filter(me);e.$$.on_destroy?e.$$.on_destroy.push(...r):re(r),e.$$.on_mount=[]}),i.forEach(de)}function Ce(e,t){const n=e.$$;n.fragment!==null&&(He(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Be(e,t){e.$$.dirty[0]===-1&&(G.push(e),Le(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qe(e,t,n,o,i,r,g,w=[-1]){const x=te;ee(e);const p=e.$$={fragment:null,ctx:[],props:r,update:U,not_equal:i,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(x?x.$$.context:[])),callbacks:pe(),dirty:w,skip_bound:!1,root:t.target||x.$$.root};g&&g(p.root);let d=!1;if(p.ctx=n?n(e,t.props||{},(h,H,...b)=>{const S=b.length?b[0]:H;return p.ctx&&i(p.ctx[h],p.ctx[h]=S)&&(!p.skip_bound&&p.bound[h]&&p.bound[h](S),d&&Be(e,h)),H}):[],p.update(),d=!0,re(p.before_update),p.fragment=o?o(p.ctx):!1,t.target){if(t.hydrate){const h=Te(t.target);p.fragment&&p.fragment.l(h),h.forEach(A)}else p.fragment&&p.fragment.c();t.intro&&Ne(e.$$.fragment),$e(e,t.target,t.anchor),be()}ee(x)}class Ie{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){Ce(this,1),this.$destroy=U}$on(t,n){if(!me(n))return U;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ze);function We(e,t=document){return typeof e=="string"?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}function Fe(e){const t=document.createElement("div");t.className=`scrollama__debug-step ${e}`,t.style.position="fixed",t.style.left="0",t.style.width="100%",t.style.zIndex="9999",t.style.borderTop="2px solid black",t.style.borderBottom="2px solid black";const n=document.createElement("p");return n.style.position="absolute",n.style.left="0",n.style.height="1px",n.style.width="100%",n.style.borderTop="1px dashed black",t.appendChild(n),document.body.appendChild(t),t}function Re({id:e,step:t,marginTop:n}){const{index:o,height:i}=t,r=`scrollama__debug-step--${e}-${o}`;let g=document.querySelector(`.${r}`);g||(g=Fe(r)),g.style.top=`${n*-1}px`,g.style.height=`${i}px`,g.querySelector("p").style.top=`${i/2}px`}function je(){const e="abcdefghijklmnopqrstuvwxyz",t=Date.now(),n=[];for(let o=0;o<6;o+=1){const i=e[Math.floor(Math.random()*e.length)];n.push(i)}return`${n.join("")}${t}`}function ie(e){console.error(`scrollama error: ${e}`)}function Z(e){return+e.getAttribute("data-scrollama-index")}function De(e,t){const n=Math.ceil(e/t),o=[],i=1/n;for(let r=0;r<n+1;r+=1)o.push(r*i);return o}function ce(e){if(typeof e=="string"&&e.indexOf("px")>0){const t=+e.replace("px","");return isNaN(t)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:t}}else if(typeof e=="number"||!isNaN(+e))return e>1&&err("offset value is greater than 1. Fallback to 1."),e<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,e),1)};return null}function Ve(e){e.forEach(t=>t.node.setAttribute("data-scrollama-index",t.index))}function Ye(e){const{top:t}=e.getBoundingClientRect(),n=window.pageYOffset,o=document.body.clientTop||0;return t+n-o}let J,oe,C;function ye(e){const t=e?e.scrollTop:window.pageYOffset;J!==t&&(J=t,J>oe?C="down":J<oe&&(C="up"),oe=J)}function Ge(e){J=0,oe=0,document.addEventListener("scroll",()=>ye(e))}function Je(){let e={},t=je(),n=[],o,i,r,g=0,w=!1,x=!1,p=!1,d=!1,h=[];function H(){e={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},h=[]}function b(s){s&&!w&&z(),!s&&w&&E(),w=s}function S(s,c){const u=Z(s),v=n[u];c!==void 0&&(v.progress=c);const _={element:s,index:u,progress:c,direction:C};v.state==="enter"&&e.stepProgress(_)}function O(s,c=!0){const u=Z(s),v=n[u],_={element:s,index:u,direction:C};v.direction=C,v.state="enter",h[u]||e.stepEnter(_),d&&(h[u]=!0)}function F(s,c=!0){const u=Z(s),v=n[u];if(!v.state)return!1;const _={element:s,index:u,direction:C};x&&(C==="down"&&v.progress<1?S(s,1):C==="up"&&v.progress>0&&S(s,0)),v.direction=C,v.state="exit",e.stepExit(_)}function P([s]){const c=Z(s.target),u=n[c],v=s.target.offsetHeight;v!==u.height&&(u.height=v,R(u),I(u),q(u))}function l([s]){ye(i);const{isIntersecting:c,target:u}=s;c?O(u):F(u)}function k([s]){const c=Z(s.target),u=n[c],{isIntersecting:v,intersectionRatio:_,target:B}=s;v&&u.state==="enter"&&S(B,_)}function R({observers:s}){Object.keys(s).map(c=>{s[c].disconnect()})}function E(){n.forEach(R)}function q(s){const c=new ResizeObserver(P);c.observe(s.node),s.observers.resize=c}function T(){n.forEach(q)}function I(s){const c=window.innerHeight,u=s.offset||o,v=u.format==="pixels"?1:c,_=u.value*v,B=s.height/2-_,D=s.height/2-(c-_),V={rootMargin:`${B}px 0px ${D}px 0px`,threshold:.5,root:r},fe=new IntersectionObserver(l,V);fe.observe(s.node),s.observers.step=fe,p&&Re({id:t,step:s,marginTop:B,marginBottom:D})}function N(){n.forEach(I)}function Q(s){const c=window.innerHeight,u=s.offset||o,v=u.format==="pixels"?1:c,_=u.value*v,B=-_+s.height,D=_-c,X=`${B}px 0px ${D}px 0px`,ne=De(s.height,g),W={rootMargin:X,threshold:ne},V=new IntersectionObserver(k,W);V.observe(s.node),s.observers.progress=V}function j(){n.forEach(Q)}function z(){E(),T(),N(),x&&j()}const f={};return f.setup=({step:s,parent:c,offset:u=.5,threshold:v=4,progress:_=!1,once:B=!1,debug:D=!1,container:X=void 0,root:ne=null})=>(Ge(X),n=We(s,c).map((W,V)=>({index:V,direction:void 0,height:W.offsetHeight,node:W,observers:{},offset:ce(W.dataset.offset),top:Ye(W),progress:0,state:void 0})),n.length?(x=_,d=B,p=D,g=Math.max(1,+v),o=ce(u),i=X,r=ne,H(),Ve(n),b(!0),f):(ie("no step elements"),f)),f.enable=()=>(b(!0),f),f.disable=()=>(b(!1),f),f.destroy=()=>(b(!1),H(),f),f.resize=()=>(z(),f),f.offset=s=>s==null?o.value:(o=ce(s),z(),f),f.onStepEnter=s=>(typeof s=="function"?e.stepEnter=s:ie("onStepEnter requires a function"),f),f.onStepExit=s=>(typeof s=="function"?e.stepExit=s:ie("onStepExit requires a function"),f),f.onStepProgress=s=>(typeof s=="function"?e.stepProgress=s:ie("onStepProgress requires a function"),f),f}function Ue(e){let t,n,o,i,r,g,w,x,p,d,h,H,b,S,O,F,P,l,k,R,E,q,T,I,N,Q,j,z,f;return{c(){t=y("header"),t.innerHTML='<h1 class="svelte-1v8w01i">Hastings Park, an $80M business</h1> <p class="subhead svelte-1v8w01i">The PNEâ€™s annual fair first opened in 1910. At nearly a half-kilometre square, it was one of the largest of its kind in North America.</p>',n=L(),o=y("div"),i=y("video"),r=y("source"),w=y("source"),p=L(),d=y("div"),h=y("div"),h.innerHTML='<div class="copy svelte-1v8w01i"><p>During the Second World War the fair was shut down and the site was used to detain Japanese Canadians. Several plaques now commemorate the roughly 8,000 people who were detained at buildings around the 0.7-square-kilometre site.</p></div>',H=L(),b=y("div"),b.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">PNE Forum</h2> <p class="section-subhead svelte-1v8w01i">Built 1931</p> <p>The art deco heritage building is a multi-use facility used mainly for commercial video shoots. During the Second World War, Japanese Canadian men and teen boys were detained here.</p> <h2 class="svelte-1v8w01i">Garden Auditorium</h2> <p class="section-subhead svelte-1v8w01i">Built 1939-40</p> <p>The streamlined art moderne heritage building hosts events and classes by CircusWest Performing Arts Society.</p></div>',S=L(),O=y("div"),O.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">Pacific Coliseum</h2> <p class="section-subhead svelte-1v8w01i">Built 1968</p> <p>The 17,500-seat facility hosts sports, concerts and special events. It was home to the Vancouver Canucks from 1970-1995.</p></div>',F=L(),P=y("div"),P.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">Agrodome</h2> <p class="section-subhead svelte-1v8w01i">Built 1963</p> <p>The 2,700-seat facility houses an ice skating rink for minor hockey and figure skating events as well as agricultural shows.</p> <h2 class="svelte-1v8w01i">Livestock building</h2> <p class="section-subhead svelte-1v8w01i">Built 1929-39</p> <p>The art moderne heritage building is used mainly for filming and storage. During the Second World War, over 3,000 Japanese Canadian women and children were detained here.</p></div>',l=L(),k=y("div"),k.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">Hastings racecourse</h2> <p class="section-subhead svelte-1v8w01i">Built 1892</p> <p>Officials have talked for years about â€˜greeningâ€™ the track, which covers nearly 30% of the park.</p></div>',R=L(),E=y("div"),E.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">Parking and roads</h2> <p>Roughly 25% of Hastings Park is made up of roads and parking spaces.</p></div>',q=L(),T=y("div"),T.innerHTML='<div class="copy svelte-1v8w01i"><h2 class="svelte-1v8w01i">Playland</h2> <p class="section-subhead svelte-1v8w01i">Built 1958</p> <p>Originally located at the Coliseum site, the park was renamed and moved to its current location in 1958 â€“ the same year the popular wooden rol ler coaster was built.</p></div>',I=L(),N=y("div"),N.innerHTML='<div class="copy svelte-1v8w01i"><p>Today, the fair hosts half a million people or more each year. Hastings Parkâ€™s aging buildings host film productions, live events, concerts, trade shows and are leased to tenants like CircusWest and Great Canadian Casino.</p></div>',Q=L(),j=y("main"),j.innerHTML="",z=L(),f=y("footer"),f.innerHTML='<p class="source svelte-1v8w01i">Source: Pacific National Exhibition, HastingsPark1942.ca, Google Earth, City of Vancouver</p>',a(t,"class","svelte-1v8w01i"),he(r.src,g=Ke)||a(r,"src",g),a(r,"type","video/mp4"),he(w.src,x=Qe)||a(w,"src",x),a(w,"type","video/webm"),a(i,"preload","auto"),a(i,"class","svelte-1v8w01i"),a(o,"class","video-container svelte-1v8w01i"),a(h,"class","section svelte-1v8w01i"),a(h,"data-start","0"),a(h,"data-end","1.5"),a(b,"class","section svelte-1v8w01i"),a(b,"data-start","1.5"),a(b,"data-end","9"),a(O,"class","section svelte-1v8w01i"),a(O,"data-start","9"),a(O,"data-end","16"),a(P,"class","section svelte-1v8w01i"),a(P,"data-start","16"),a(P,"data-end","22"),a(k,"class","section svelte-1v8w01i"),a(k,"data-start","22"),a(k,"data-end","26"),a(E,"class","section svelte-1v8w01i"),a(E,"data-start","26"),a(E,"data-end","33"),a(T,"class","section svelte-1v8w01i"),a(T,"data-start","33"),a(T,"data-end","38"),a(N,"class","section svelte-1v8w01i"),a(N,"data-start","38"),a(N,"data-end","45"),a(d,"id","scrollytelling"),a(d,"class","svelte-1v8w01i"),a(f,"class","svelte-1v8w01i")},m(s,c){$(s,t,c),$(s,n,c),$(s,o,c),m(o,i),m(i,r),m(i,w),e[2](i),$(s,p,c),$(s,d,c),m(d,h),e[3](h),m(d,H),m(d,b),e[4](b),m(d,S),m(d,O),e[5](O),m(d,F),m(d,P),e[6](P),m(d,l),m(d,k),e[7](k),m(d,R),m(d,E),e[8](E),m(d,q),m(d,T),e[9](T),m(d,I),m(d,N),e[10](N),$(s,Q,c),$(s,j,c),$(s,z,c),$(s,f,c)},p:U,i:U,o:U,d(s){s&&(A(t),A(n),A(o),A(p),A(d),A(Q),A(j),A(z),A(f)),e[2](null),e[3](null),e[4](null),e[5](null),e[6](null),e[7](null),e[8](null),e[9](null),e[10](null)}}}const Ke="src/video/pne-flyover-labels-lores.mp4",Qe="src/video/pne-flyover-labels-lores.webm";function Xe(e,t,n){let o,i=[],r=null,g=!1;function w(){if(!r||!g)return;const l=r.offsetTop,k=r.offsetHeight,E=(window.scrollY+window.innerHeight/2-l)/k,q=parseFloat(r.getAttribute("data-end")),T=parseFloat(r.getAttribute("data-start"));if(E>=0&&E<=1){const I=T+(q-T)*E;n(0,o.currentTime=I,o)}}async function x(){const l=Je();o&&n(0,o.muted=!0,o),l.setup({step:".section",offset:.5,debug:!1}).onStepEnter(({element:k})=>{r=k,w()}),window.addEventListener("scroll",w),window.addEventListener("resize",l.resize),o.addEventListener("loadeddata",()=>{n(0,o.muted=!0,o),g=!0,w()}),o.addEventListener("canplay",()=>{o.pause()})}Oe(x);function p(l){M[l?"unshift":"push"](()=>{o=l,n(0,o)})}function d(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function h(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function H(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function b(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function S(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function O(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function F(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}function P(l){M[l?"unshift":"push"](()=>{i=l,n(1,i)})}return[o,i,p,d,h,H,b,S,O,F,P]}class Ze extends Ie{constructor(t){super(),qe(this,t,Xe,Ue,Ee,{})}}new Ze({target:document.getElementById("app")});
